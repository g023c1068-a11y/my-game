<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="utf-8">
    <title>My Unity Game with Leaderboard (16:9 Aspect Ratio)</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            margin: 0;
            background: #222;
            color: #fff;
            font-family: sans-serif;
            display: flex;
            justify-content: flex-start; 
            align-items: flex-start;
            gap: 20px;
            padding: 20px;
            min-height: 100vh;
        }
        
        /* ğŸ® Unityã‚³ãƒ³ãƒ†ãƒŠ: ã‚¢ã‚¹ãƒšã‚¯ãƒˆæ¯” 16:9 ã‚’ç¶­æŒ */
        #unity-container { 
            width: 65%;
            max-width: 960px;
            height: 0; 
            /* 9/16 = 56.25%ã€‚ã“ã®å€¤ã§å¹…ã«å¯¾ã™ã‚‹é«˜ã•ã‚’è¨­å®šã—ã€16:9ã‚’ç¶­æŒ */
            padding-bottom: 56.25%; 
            position: relative; 
            border-radius: 8px; /* ã‚³ãƒ³ãƒ†ãƒŠã«ã‚‚è§’ä¸¸ã‚’é©ç”¨ */
            overflow: hidden; /* ã‚³ãƒ³ãƒ†ãƒŠå¤–ã®è¦ç´ ã‚’è¦‹ã›ãªã„ã‚ˆã†ã« */
        }
        
        /* Canvas: ã‚³ãƒ³ãƒ†ãƒŠã®å…¨ä½“ã‚’ä½¿ã†ï¼ˆçµ¶å¯¾é…ç½®ï¼‰ */
        canvas { 
            width: 100%; 
            height: 100%; 
            background: #111; 
            position: absolute;
            top: 0;
            left: 0;
        }
        
        /* ğŸ† ãƒªãƒ¼ãƒ€ãƒ¼ãƒœãƒ¼ãƒ‰: å¹…ã‚’å›ºå®š */
        #leaderboard-area {
            width: 300px;
            background: #333;
            border-radius: 10px;
            padding: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
        }
        #leaderboard-area h2 { margin-top: 0; text-align: center; }
        #score-table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        #score-table th, #score-table td {
            border: 1px solid #555;
            padding: 6px;
            text-align: center;
        }
    </style>
</head>
<body>
    <div id="unity-container">
        <canvas id="unity-canvas"></canvas>
    </div>

    <div id="leaderboard-area">
        <h2>ğŸ† ãƒªãƒ¼ãƒ€ãƒ¼ãƒœãƒ¼ãƒ‰</h2>
        <table id="score-table">
            <thead>
                <tr><th>Rank</th><th>Name</th><th>Score</th></tr>
            </thead>
            <tbody id="leaderboard-body">
                <tr><td>-</td><td>Loading...</td><td>-</td></tr>
            </tbody>
        </table>
    </div>

    <script>
        // --- Unityã®è¨­å®š ---
        const buildUrl = "Build";
        const loaderUrl = buildUrl + "/Build.loader.js";
        const config = {
            dataUrl: buildUrl + "/Build.data.unityweb",
            frameworkUrl: buildUrl + "/Build.framework.unityweb",
            codeUrl: buildUrl + "/Build.wasm.unityweb",
            streamingAssetsUrl: "StreamingAssets",
            companyName: "YourCompany",
            productName: "My Unity Game",
            productVersion: "1.0",
            showBanner: (msg, type) => console.log(type + ": " + msg)
        };

        const canvas = document.querySelector("#unity-canvas");

        // Unityã®ãƒ­ãƒ¼ãƒ‰å‡¦ç†
        const script = document.createElement("script");
        script.src = loaderUrl;
        script.onload = () => {
            createUnityInstance(canvas, config, (progress) => {
                console.log("Loading: " + (progress * 100).toFixed(1) + "%");
            }).then((unityInstance) => {
                console.log("âœ… Unity Game Loaded!");
                window.unityGameInstance = unityInstance;

                // èµ·å‹•æ™‚ã«ãƒ©ãƒ³ã‚­ãƒ³ã‚°è¡¨ç¤º
                fetchLeaderboard();
            }).catch((message) => {
                alert("âŒ Unity èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼: " + message);
            });
        };
        document.body.appendChild(script);

        // --- ãƒªãƒ¼ãƒ€ãƒ¼ãƒœãƒ¼ãƒ‰å‡¦ç†ï¼ˆå‰å›ã®å®Ÿè£…ã‚’ç¶­æŒï¼‰---
        function fetchLeaderboard() {
            const scores = [
                { rank: 1, name: "Alice", score: 12500 },
                { rank: 2, name: "Bob", score: 9800 },
                { rank: 3, name: "Char", score: 7500 },
                { rank: 4, name: "Dave", score: 6800 },
                { rank: 5, name: "Eve", score: 5500 }
            ];

            const tbody = document.getElementById('leaderboard-body');
            tbody.innerHTML = '';
            scores.forEach(s => {
                const row = tbody.insertRow();
                row.insertCell().textContent = s.rank;
                row.insertCell().textContent = s.name;
                row.insertCell().textContent = s.score.toLocaleString();
            });
        }

        // --- Unityå´ã‹ã‚‰å‘¼ã³å‡ºã•ã‚Œã‚‹é–¢æ•°ï¼ˆC#ã¨é€£æºï¼‰---
        window.SubmitScoreToWeb = function(name, score) {
            console.log("Score received from Unity:", name, score);
            fetchLeaderboard(); 
        }
    </script>
</body>
</html>
