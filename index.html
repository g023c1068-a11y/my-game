<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="utf-8">
    <title>My Unity Game with Leaderboard</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            margin: 0;
            background: #222;
            color: #fff;
            font-family: sans-serif;
            display: flex;
            /* ç”»é¢å·¦ä¸Šã‹ã‚‰é–‹å§‹ */
            justify-content: flex-start; 
            align-items: flex-start;
            gap: 20px;
            padding: 20px;
            min-height: 100vh;
        }
        /* Unityã‚³ãƒ³ãƒ†ãƒŠ: å¹…ã¨é«˜ã•ã‚’æ˜ç¤ºçš„ã«æŒ‡å®š */
        #unity-container { 
            width: 65%; /* ç”»é¢å¹…ã®ç´„2/3ã‚’ä½¿ç”¨ */
            max-width: 960px;
            height: 600px; /* ã‚²ãƒ¼ãƒ ç”»é¢ã®æ¨å¥¨é«˜ã• */
        }
        /* Canvas: ã‚³ãƒ³ãƒ†ãƒŠã®å…¨ä½“ã‚’ä½¿ã† */
        canvas { 
            width: 100%; 
            height: 100%; 
            background: #111; 
            border-radius: 8px; 
        }
        /* ãƒªãƒ¼ãƒ€ãƒ¼ãƒœãƒ¼ãƒ‰: å¹…ã¨é«˜ã•ã‚’å›ºå®š */
        #leaderboard-area {
            width: 300px;
            height: 600px; /* ã‚²ãƒ¼ãƒ ç”»é¢ã®é«˜ã•ã«åˆã‚ã›ã‚‹ */
            background: #333;
            border-radius: 10px;
            padding: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
        }
        #leaderboard-area h2 { margin-top: 0; text-align: center; }
        #score-table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        #score-table th, #score-table td {
            border: 1px solid #555;
            padding: 6px;
            text-align: center;
        }
    </style>
</head>
<body>
    <div id="unity-container">
        <canvas id="unity-canvas"></canvas>
    </div>

    <div id="leaderboard-area">
        <h2>ğŸ† ãƒªãƒ¼ãƒ€ãƒ¼ãƒœãƒ¼ãƒ‰</h2>
        <table id="score-table">
            <thead>
                <tr><th>Rank</th><th>Name</th><th>Score</th></tr>
            </thead>
            <tbody id="leaderboard-body">
                <tr><td>-</td><td>Loading...</td><td>-</td></tr>
            </tbody>
        </table>
    </div>

    <script>
        // --- Unityã®è¨­å®š ---
        const buildUrl = "Build";
        const loaderUrl = buildUrl + "/Build.loader.js";
        const config = {
            dataUrl: buildUrl + "/Build.data.unityweb",
            frameworkUrl: buildUrl + "/Build.framework.unityweb",
            codeUrl: buildUrl + "/Build.wasm.unityweb",
            streamingAssetsUrl: "StreamingAssets",
            companyName: "YourCompany",
            productName: "My Unity Game",
            productVersion: "1.0",
            showBanner: (msg, type) => console.log(type + ": " + msg)
        };

        const canvas = document.querySelector("#unity-canvas");

        // Unityã®ãƒ­ãƒ¼ãƒ‰å‡¦ç†
        const script = document.createElement("script");
        script.src = loaderUrl;
        script.onload = () => {
            createUnityInstance(canvas, config, (progress) => {
                console.log("Loading: " + (progress * 100).toFixed(1) + "%");
            }).then((unityInstance) => {
                console.log("âœ… Unity Game Loaded!");
                window.unityGameInstance = unityInstance;

                // èµ·å‹•æ™‚ã«ãƒ©ãƒ³ã‚­ãƒ³ã‚°è¡¨ç¤º
                fetchLeaderboard();
            }).catch((message) => {
                alert("âŒ Unity èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼: " + message);
            });
        };
        document.body.appendChild(script);

        // --- ãƒªãƒ¼ãƒ€ãƒ¼ãƒœãƒ¼ãƒ‰å‡¦ç† ---
        function fetchLeaderboard() {
            // â˜…å®Ÿéš›ã¯ã‚µãƒ¼ãƒãƒ¼APIã‹ã‚‰å–å¾—ã™ã‚‹éƒ¨åˆ†ï¼ˆä»Šã¯ãƒ€ãƒŸãƒ¼ãƒ‡ãƒ¼ã‚¿ï¼‰
            // fetch('https://your.leaderboard.api/get_scores') ...
            const scores = [
                { rank: 1, name: "Alice", score: 12500 },
                { rank: 2, name: "Bob", score: 9800 },
                { rank: 3, name: "Char", score: 7500 },
                { rank: 4, name: "Dave", score: 6800 },
                { rank: 5, name: "Eve", score: 5500 }
            ];

            const tbody = document.getElementById('leaderboard-body');
            tbody.innerHTML = '';
            scores.forEach(s => {
                const row = tbody.insertRow();
                row.insertCell().textContent = s.rank;
                row.insertCell().textContent = s.name;
                row.insertCell().textContent = s.score.toLocaleString();
            });
        }

        // --- Unityå´ã‹ã‚‰å‘¼ã³å‡ºã•ã‚Œã‚‹é–¢æ•°ï¼ˆC#ã¨é€£æºï¼‰---
        // Unity C#å´: [DllImport("__Internal")] public static extern void SubmitScoreToWeb(string name, int score);
        window.SubmitScoreToWeb = function(name, score) {
            console.log("Score received from Unity:", name, score);
            // â˜…ã“ã“ã§ã‚¹ã‚³ã‚¢ã‚’ã‚µãƒ¼ãƒãƒ¼ã«é€ä¿¡ã§ãã‚‹
            // fetch('https://your.leaderboard.api/submit_score', { method: 'POST', body: JSON.stringify({ name, score }) })
            //   .then(() => fetchLeaderboard()); // æˆåŠŸã—ãŸã‚‰æ›´æ–°
            fetchLeaderboard(); // ãƒ‡ãƒ¢ã¨ã—ã¦å³åº§ã«æ›´æ–°å†è¡¨ç¤º
        }
    </script>
</body>
</html>
